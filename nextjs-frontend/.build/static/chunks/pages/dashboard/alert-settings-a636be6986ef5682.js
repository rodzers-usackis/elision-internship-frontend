(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[540],{9386:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/alert-settings",function(){return r(9457)}])},5375:function(e,t,r){"use strict";r.d(t,{I:function(){return a},O:function(){return Z}});var n,a,s=r(5893),i=r(2133),l=r(281),o=r(6755),c=r(5150),d=r(7848),u=r(6574),h=r(4948);let x=()=>{let{alertCount:e}=function(){let{isLoading:e,isError:t,data:r}=(0,d.a)({queryKey:["alert-count"],queryFn:()=>(0,u.Bc)()});return{isAlertCountLoading:e,isAlertCountError:t,alertCount:r}}();return(0,s.jsx)(s.Fragment,{children:e>0?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(h.Z,{badgeContent:e,color:"error",children:(0,s.jsx)(c.Z,{})})}):(0,s.jsx)(c.Z,{})})};var f=r(8878),j=r(4229),m=r(8758);let Z=[{title:"My Catalog",href:"/dashboard/my-catalog",className:"nav-links",icon:(0,s.jsx)(i.Z,{}),value:1},{title:" Competitors",href:"/dashboard/competitors",className:"nav-links",icon:(0,s.jsx)(l.Z,{}),value:2},{title:"Reports",href:"/dashboard/reports",className:"nav-links",icon:(0,s.jsx)(o.Z,{}),value:3},{title:" Alerts",href:"/dashboard/alerts",className:"nav-links",icon:(0,s.jsx)(x,{}),value:4},{title:" Alert Rules",href:"/dashboard/alert-rules",className:"nav-links",icon:(0,s.jsx)(m.Z,{}),value:5,subValue:1},{title:"Alert Settings",href:"/dashboard/alert-settings",className:"nav-links",icon:(0,s.jsx)(j.Z,{}),value:6,subValue:2},{title:"My Account",href:"/dashboard/my-account",className:"nav-links",icon:(0,s.jsx)(f.Z,{}),value:7}];(n=a||(a={}))[n.MyCatalog=1]="MyCatalog",n[n.Competitors=2]="Competitors",n[n.Reports=3]="Reports",n[n.Alerts=4]="Alerts",n[n.AlertRules=5]="AlertRules",n[n.AlertSettings=6]="AlertSettings",n[n.MyAccount=7]="MyAccount"},6381:function(e,t,r){"use strict";r.d(t,{Z:function(){return w}});var n=r(5893),a=r(7294),s=r(6886),i=r(3321),l=r(7720),o=r(7533),c=r(5861),d=r(155),u=r(8462),h=r(5375),x=r(7212),f=r(7594),j=r(9334),m=r(8619),Z=r(1145),p=r(8201),g=r(3540),v=r(5675),y=r.n(v),b=r(1664),_=r.n(b),A=r(4958),P=r.n(A),C=r(3542);function S(e){let{selectedPage:t}=e,r="260px",{logout:v,loggedInUser:b}=(0,a.useContext)(C.Z),A=e=>({selected:t===e});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.ZP,{variant:"permanent",anchor:"left",sx:{minWidth:r,width:r},children:(0,n.jsxs)(s.ZP,{container:!0,display:"flex",justifyContent:"space-between",flexDirection:"column",paddingX:2,sx:{height:"100%"},children:[(0,n.jsxs)(s.ZP,{item:!0,container:!0,display:"flex",flexDirection:"column",flex:1,children:[(0,n.jsx)(s.ZP,{item:!0,display:"flex",justifyContent:"center",paddingY:1,children:(0,n.jsx)(d.Z,{children:(0,n.jsx)(y(),{src:"/price_spy_logo.svg",alt:"Price Spy Logo",width:180,height:80,priority:!0})})}),(0,n.jsx)(l.Z,{}),(0,n.jsx)(s.ZP,{item:!0,paddingTop:1,children:(0,n.jsx)(u.Z,{children:h.O.map(e=>(0,n.jsx)(x.ZP,{children:(0,n.jsx)(_(),{href:e.href,className:P().listItemLink,children:(0,n.jsxs)(m.Z,{...A(e.value),children:[(0,n.jsx)(f.Z,{children:e.icon}),(0,n.jsx)(j.Z,{primary:e.title})]})})},e.value))})})]}),(0,n.jsxs)(s.ZP,{item:!0,children:[(0,n.jsx)(l.Z,{}),(0,n.jsxs)(s.ZP,{container:!0,display:"flex",justifyContent:"space-evenly",alignItems:"center",flexDirection:"row",paddingY:2,children:[(0,n.jsx)(s.ZP,{item:!0,children:(0,n.jsx)(Z.Z,{sx:{fontSize:"32px"}})}),(0,n.jsx)(s.ZP,{item:!0,children:(0,n.jsx)(c.Z,{fontWeight:"bold",children:"Need help? Chat with us"})})]}),(0,n.jsx)(l.Z,{}),(0,n.jsxs)(s.ZP,{container:!0,display:"flex",justifyContent:"space-evenly",alignItems:"center",flexDirection:"row",paddingY:2,children:[(0,n.jsx)(s.ZP,{item:!0,children:(0,n.jsx)(i.Z,{children:(0,n.jsx)(p.Z,{sx:{fontSize:"48px"}})})}),(0,n.jsxs)(s.ZP,{item:!0,children:[(0,n.jsx)(c.Z,{children:"Customer"}),(0,n.jsx)(c.Z,{fontWeight:"bold",children:null==b?void 0:b.firstName})]}),(0,n.jsx)(s.ZP,{item:!0,children:(0,n.jsx)(i.Z,{onClick:e=>{e.preventDefault(),v()},children:(0,n.jsx)(g.Z,{sx:{fontSize:"30px"}})})})]})]})]})})})}var E=r(5981),N=r.n(E);function w(e){let{pageComponent:t,currentPage:r,pageTitle:a,pageSubtitle:i,actionShelf:o}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s.ZP,{container:!0,display:"flex",flexDirection:"row",height:"100vh",px:0,children:[(0,n.jsx)(s.ZP,{item:!0,style:{flex:0},children:(0,n.jsx)(S,{selectedPage:r})}),(0,n.jsxs)(s.ZP,{item:!0,className:N().dashboardWrapper,children:[(0,n.jsx)(c.Z,{className:N().dashboardTitle,children:a}),(0,n.jsx)(c.Z,{className:N().dashboardSubtitle,children:i}),o,(0,n.jsx)(l.Z,{}),t]})]})})}},9457:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return V}});var n=r(5893),a=r(1737),s=r(8456),i=r(6886),l=r(5981),o=r.n(l),c=r(7294),d=r(7848),u=r(6154),h=r(4484);async function x(){let e=await u.Z.get(h.ZP.ALERT_SETTINGS);return e.data}async function f(e){let t=await u.Z.patch(h.ZP.ALERT_SETTINGS,e);return t.data}var j=r(5861),m=r(1345),Z=r.n(m);function p(e){let{title:t,children:r}=e;return(0,n.jsxs)("div",{className:Z()["alert-settings-row"],children:[(0,n.jsx)(j.Z,{variant:"h5",children:t}),r]})}var g=r(1604),v=r(7536),y=r(6312),b=r(3321),_=r(480),A=r(8972),P=r(1683),C=r(5843),S=r(135),E=r(4386),N=r(5945),w=r(8228),D=r(3542);let k=g.z.object({alertsActive:g.z.boolean(),notifyViaEmail:g.z.boolean()});function T(e){let{alertSettings:t}=e,{loggedInUser:r}=(0,c.useContext)(D.Z),{register:i,formState:l,handleSubmit:o,watch:d}=(0,v.cI)({resolver:(0,y.F)(k),defaultValues:{alertsActive:t.alertsActive,notifyViaEmail:t.notifyViaEmail}}),{isAlertSettingsUpdateError:u,isAlertSettingsUpdateLoading:h,updateAlertSettingsMutation:x}=function(){let e=(0,N.NL)(),{isLoading:t,isError:r,data:n,mutateAsync:a}=(0,w.D)({mutationFn:f,onSuccess:(t,r)=>{e.setQueryData(["alertSettings"],e=>({...e,...r,...t}))}});return{isAlertSettingsUpdateError:r,isAlertSettingsUpdateLoading:t,alertSettingsUpdated:n,updateAlertSettingsMutation:a}}(),[j,m]=(0,c.useState)(!1);function g(){m(!1);let{alertsActive:e,notifyViaEmail:t}=d();x({alertsActive:e,notifyViaEmail:t}).then(()=>{m(!0)})}return(0,n.jsxs)("form",{className:Z()["alert-settings-form"],onSubmit:o(g),children:[(0,n.jsx)(p,{title:"Alerts active",children:(0,n.jsx)(_.Z,{control:(0,n.jsx)(C.Z,{checked:d("alertsActive"),id:"alertsActive",...i("alertsActive")}),label:"Alerts active",labelPlacement:"start",hidden:!0})}),(0,n.jsx)(p,{title:"Notify via email",children:(0,n.jsx)(_.Z,{control:(0,n.jsx)(C.Z,{checked:d("notifyViaEmail"),id:"notifyViaEmail",...i("notifyViaEmail")}),label:"Notify via email",labelPlacement:"start",hidden:!0})}),(0,n.jsx)(p,{title:"Store alerts for",children:(0,n.jsx)(E.Z,{title:"Feature available for premium users only.",children:(0,n.jsx)(_.Z,{control:(0,n.jsxs)(P.Z,{labelId:"alert-storage-label",id:"alerts-storage-select",label:"Alerts storage time",defaultValue:30,disabled:!0,sx:{marginLeft:"1rem"},children:[(0,n.jsx)(A.Z,{value:30,children:"30 days"}),(0,n.jsx)(A.Z,{value:60,children:"60 days"}),(0,n.jsx)(A.Z,{value:90,children:"90 days"})]}),label:"Store alerts for",labelPlacement:"start",hidden:!0})})}),(0,n.jsx)(p,{title:"Email address",children:(0,n.jsx)(E.Z,{title:"Feature not available yet. Emails will be sent to the email address you registered with.",children:(0,n.jsx)(S.Z,{placeholder:"Email address",label:"Email address",defaultValue:(null==r?void 0:r.email)||"Email address",disabled:!0})})}),h?(0,n.jsx)(s.Z,{}):(0,n.jsx)(b.Z,{variant:"contained",onClick:o(g),children:"Save"}),j&&(0,n.jsx)(a.Z,{severity:"success",children:"Alert settings updated successfully."}),u&&(0,n.jsx)(a.Z,{severity:"error",children:"Error updating alert settings."})]})}var I=r(6381),L=r(5375);function V(){let{isAlertSettingsError:e,alertSettings:t,isAlertSettingsLoading:r}=function(){let{isLoading:e,isError:t,data:r}=(0,d.a)({queryKey:["alertSettings"],queryFn:x});return{isAlertSettingsLoading:e,isAlertSettingsError:t,alertSettings:r}}();return(0,n.jsx)(I.Z,{currentPage:L.I.AlertSettings,pageTitle:"Alert settings",pageSubtitle:"Manage your alert preferences",actionShelf:(0,n.jsx)(n.Fragment,{}),pageComponent:(0,n.jsx)(function(){return(0,n.jsx)(i.ZP,{item:!0,className:o().contentWrapper,children:r?(0,n.jsx)(s.Z,{}):e?(0,n.jsx)(a.Z,{severity:"error",children:"Error loading alerts"}):!r&&!e&&t&&(0,n.jsx)(i.ZP,{item:!0,className:o().lineChart,children:(0,n.jsx)(T,{alertSettings:t})})})},{})})}},6574:function(e,t,r){"use strict";r.d(t,{Bc:function(){return i},fH:function(){return l},sM:function(){return s}});var n=r(6154),a=r(4484);async function s(){let e=await n.Z.get(a.ZP.ALERTS);return console.log("Get alerts response: ",e.data),e.data}async function i(){let e=await n.Z.get(a.ZP.ALERT_COUNT);return void 0===e.data||null===e.data?0:e.data}async function l(e){let t=await n.Z.patch(a.ZP.ALERTS,e);return t.data}},1345:function(e){e.exports={"alert-settings-row":"AlertSettings_alert-settings-row__BB_6a","alert-settings-form":"AlertSettings_alert-settings-form__8KNXE"}},4958:function(e){e.exports={accountCircleIcon:"DashboardDrawer_accountCircleIcon__LJVAz",logoutIcon:"DashboardDrawer_logoutIcon__EuxIl",listItemLink:"DashboardDrawer_listItemLink__vrok9"}},5981:function(e){e.exports={dashboardTitle:"DashboardGenericContent_dashboardTitle__JYo_d",dashboardSubtitle:"DashboardGenericContent_dashboardSubtitle__d1_jV",actionShelf:"DashboardGenericContent_actionShelf__Z69vu",contentWrapper:"DashboardGenericContent_contentWrapper__XV2Uc",lineChart:"DashboardGenericContent_lineChart__4Dsfy",drawerWrapper:"DashboardGenericContent_drawerWrapper__Yp0vM",dashboardWrapper:"DashboardGenericContent_dashboardWrapper__aPPfz"}}},function(e){e.O(0,[135,810,243,760,774,888,179],function(){return e(e.s=9386)}),_N_E=e.O()}]);