(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[253],{3343:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var a=n(r(4938)),s=r(5893),i=(0,a.default)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=i},3582:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var a=n(r(4938)),s=r(5893),i=(0,a.default)((0,s.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zM8.5 15H7.3l-2.55-3.5V15H3.5V9h1.25l2.5 3.5V9H8.5v6zm5-4.74H11v1.12h2.5v1.26H11v1.11h2.5V15h-4V9h4v1.26zm7 3.74c0 .55-.45 1-1 1h-4c-.55 0-1-.45-1-1V9h1.25v4.51h1.13V9.99h1.25v3.51h1.12V9h1.25v5z"}),"FiberNew");t.Z=i},2621:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/alerts",function(){return r(5853)}])},5375:function(e,t,r){"use strict";r.d(t,{I:function(){return a},O:function(){return Z}});var n,a,s=r(5893),i=r(2133),l=r(281),c=r(6755),o=r(5150),d=r(7848),u=r(6574),h=r(4948);let x=()=>{let{alertCount:e}=function(){let{isLoading:e,isError:t,data:r}=(0,d.a)({queryKey:["alert-count"],queryFn:()=>(0,u.Bc)()});return{isAlertCountLoading:e,isAlertCountError:t,alertCount:r}}();return(0,s.jsx)(s.Fragment,{children:e>0?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(h.Z,{badgeContent:e,color:"error",children:(0,s.jsx)(o.Z,{})})}):(0,s.jsx)(o.Z,{})})};var p=r(8878),f=r(4229),j=r(8758);let Z=[{title:"My Catalog",href:"/dashboard/my-catalog",className:"nav-links",icon:(0,s.jsx)(i.Z,{}),value:1},{title:" Competitors",href:"/dashboard/competitors",className:"nav-links",icon:(0,s.jsx)(l.Z,{}),value:2},{title:"Reports",href:"/dashboard/reports",className:"nav-links",icon:(0,s.jsx)(c.Z,{}),value:3},{title:" Alerts",href:"/dashboard/alerts",className:"nav-links",icon:(0,s.jsx)(x,{}),value:4},{title:" Alert Rules",href:"/dashboard/alert-rules",className:"nav-links",icon:(0,s.jsx)(j.Z,{}),value:5,subValue:1},{title:"Alert Settings",href:"/dashboard/alert-settings",className:"nav-links",icon:(0,s.jsx)(f.Z,{}),value:6,subValue:2},{title:"My Account",href:"/dashboard/my-account",className:"nav-links",icon:(0,s.jsx)(p.Z,{}),value:7}];(n=a||(a={}))[n.MyCatalog=1]="MyCatalog",n[n.Competitors=2]="Competitors",n[n.Reports=3]="Reports",n[n.Alerts=4]="Alerts",n[n.AlertRules=5]="AlertRules",n[n.AlertSettings=6]="AlertSettings",n[n.MyAccount=7]="MyAccount"},6381:function(e,t,r){"use strict";r.d(t,{Z:function(){return S}});var n=r(5893),a=r(7294),s=r(6886),i=r(3321),l=r(7720),c=r(7533),o=r(5861),d=r(155),u=r(8462),h=r(5375),x=r(7212),p=r(7594),f=r(9334),j=r(8619),Z=r(1145),m=r(8201),g=r(3540),v=r(5675),C=r.n(v),b=r(1664),_=r.n(b),y=r(4958),P=r.n(y),w=r(3542);function D(e){let{selectedPage:t}=e,r="260px",{logout:v,loggedInUser:b}=(0,a.useContext)(w.Z),y=e=>({selected:t===e});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(c.ZP,{variant:"permanent",anchor:"left",sx:{minWidth:r,width:r},children:(0,n.jsxs)(s.ZP,{container:!0,display:"flex",justifyContent:"space-between",flexDirection:"column",paddingX:2,sx:{height:"100%"},children:[(0,n.jsxs)(s.ZP,{item:!0,container:!0,display:"flex",flexDirection:"column",flex:1,children:[(0,n.jsx)(s.ZP,{item:!0,display:"flex",justifyContent:"center",paddingY:1,children:(0,n.jsx)(d.Z,{children:(0,n.jsx)(C(),{src:"/price_spy_logo.svg",alt:"Price Spy Logo",width:180,height:80,priority:!0})})}),(0,n.jsx)(l.Z,{}),(0,n.jsx)(s.ZP,{item:!0,paddingTop:1,children:(0,n.jsx)(u.Z,{children:h.O.map(e=>(0,n.jsx)(x.ZP,{children:(0,n.jsx)(_(),{href:e.href,className:P().listItemLink,children:(0,n.jsxs)(j.Z,{...y(e.value),children:[(0,n.jsx)(p.Z,{children:e.icon}),(0,n.jsx)(f.Z,{primary:e.title})]})})},e.value))})})]}),(0,n.jsxs)(s.ZP,{item:!0,children:[(0,n.jsx)(l.Z,{}),(0,n.jsxs)(s.ZP,{container:!0,display:"flex",justifyContent:"space-evenly",alignItems:"center",flexDirection:"row",paddingY:2,children:[(0,n.jsx)(s.ZP,{item:!0,children:(0,n.jsx)(Z.Z,{sx:{fontSize:"32px"}})}),(0,n.jsx)(s.ZP,{item:!0,children:(0,n.jsx)(o.Z,{fontWeight:"bold",children:"Need help? Chat with us"})})]}),(0,n.jsx)(l.Z,{}),(0,n.jsxs)(s.ZP,{container:!0,display:"flex",justifyContent:"space-evenly",alignItems:"center",flexDirection:"row",paddingY:2,children:[(0,n.jsx)(s.ZP,{item:!0,children:(0,n.jsx)(i.Z,{children:(0,n.jsx)(m.Z,{sx:{fontSize:"48px"}})})}),(0,n.jsxs)(s.ZP,{item:!0,children:[(0,n.jsx)(o.Z,{children:"Customer"}),(0,n.jsx)(o.Z,{fontWeight:"bold",children:null==b?void 0:b.firstName})]}),(0,n.jsx)(s.ZP,{item:!0,children:(0,n.jsx)(i.Z,{onClick:e=>{e.preventDefault(),v()},children:(0,n.jsx)(g.Z,{sx:{fontSize:"30px"}})})})]})]})]})})})}var E=r(5981),N=r.n(E);function S(e){let{pageComponent:t,currentPage:r,pageTitle:a,pageSubtitle:i,actionShelf:c}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s.ZP,{container:!0,display:"flex",flexDirection:"row",height:"100vh",px:0,children:[(0,n.jsx)(s.ZP,{item:!0,style:{flex:0},children:(0,n.jsx)(D,{selectedPage:r})}),(0,n.jsxs)(s.ZP,{item:!0,className:N().dashboardWrapper,children:[(0,n.jsx)(o.Z,{className:N().dashboardTitle,children:a}),(0,n.jsx)(o.Z,{className:N().dashboardSubtitle,children:i}),c,(0,n.jsx)(l.Z,{}),t]})]})})}},5853:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return H}});var n,a,s=r(5893),i=r(7294),l=r(6886),c=r(135),o=r(4386),d=r(8456),u=r(1737),h=r(5981),x=r.n(h),p=r(6574),f=r(7848),j=r(3252);(n=a||(a={})).LOWER="LOWER",n.HIGHER="HIGHER";var Z=r(3816),m=r(3582),g=r(381),v=r.n(g);function C(e){let{alert:t}=e;return(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(j.Z,{children:t.read?"":(0,s.jsx)(m.Z,{})}),(0,s.jsx)(j.Z,{children:v()(t.timestamp).format("YYYY-MM-DD [\xa0\xa0] HH:mm")}),(0,s.jsx)(j.Z,{children:t.product.name}),(0,s.jsx)(j.Z,{children:t.retailerCompany.name}),(0,s.jsxs)(j.Z,{children:[t.price," â‚¬"]}),(0,s.jsx)(j.Z,{children:t.priceComparisonType===a.LOWER?(0,s.jsx)("span",{children:"Competitor's price decreased"}):(0,s.jsx)("span",{children:"Competitor's price increased"})})]})}var b=r(7357),_=r(2882),y=r(3184),P=r(295),w=r(7906),D=r(629),E=r(5347),N=r(480),S=r(5843);function A(e){let{alerts:t}=e,[r,n]=(0,i.useState)(0),[a,l]=(0,i.useState)(!0),[c,o]=(0,i.useState)(10),d=(e,t)=>{n(t)},u=e=>{o(parseInt(e.target.value,10)),n(0)},h=e=>{l(e.target.checked)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(b.Z,{sx:{width:"100%",pt:2},children:[(0,s.jsxs)(D.Z,{sx:{width:"100%",mb:2},children:[(0,s.jsx)(_.Z,{children:(0,s.jsxs)(w.Z,{"aria-labelledby":"tableTitle",size:a?"small":"medium",children:[(0,s.jsx)(y.Z,{children:(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(j.Z,{sx:{visibility:"hidden"},children:"new"}),(0,s.jsx)(j.Z,{children:" Created at "}),(0,s.jsx)(j.Z,{children:"Product"}),(0,s.jsx)(j.Z,{children:"Competitor"}),(0,s.jsx)(j.Z,{children:"Price"}),(0,s.jsx)(j.Z,{children:"Alert Trigger"})]})}),(0,s.jsx)(P.Z,{children:t.map(e=>(0,s.jsx)(C,{alert:e},e.id))})]})}),(0,s.jsx)(E.Z,{rowsPerPageOptions:[10,25,50],component:"div",count:t.length,rowsPerPage:c,page:r,onPageChange:d,onRowsPerPageChange:u})]}),(0,s.jsx)(N.Z,{control:(0,s.jsx)(S.Z,{checked:a,onChange:h}),label:"Dense padding"})]})})}var k=r(6381),L=r(5375),R=r(3946),I=r(3343);function H(){let{isAlertsError:e,alerts:t,isAlertsLoading:r}=function(){let{isLoading:e,isError:t,data:r}=(0,f.a)({queryKey:["alerts"],queryFn:p.sM});return{isAlertsLoading:e,isAlertsError:t,alerts:r}}(),[n,a]=(0,i.useState)([]),[h,j]=(0,i.useState)(""),Z=(0,i.useRef)(null);return(0,i.useEffect)(()=>{var e;let r=null!==(e=null==t?void 0:t.filter(e=>!e.read))&&void 0!==e?e:[];r.length>0&&(r.forEach(e=>{e.read=!0}),(0,p.fH)(r))},[t]),(0,i.useEffect)(()=>{!function(){if(!t)return;if(""===h||!h){a(t);return}let e=t.filter(e=>{let t=e.product,r=e.retailerCompany,n=h.toLowerCase();return t.name.toLowerCase().includes(n)||t.ean.toLowerCase().includes(n)||t.manufacturerCode.toLowerCase().includes(n)||r.name.toLowerCase().includes(n)});a(e)}()},[h,t]),(0,i.useEffect)(()=>{Z.current&&Z.current.focus()},[h,n]),(0,s.jsx)(k.Z,{currentPage:L.I.Alerts,pageTitle:"Alerts",pageSubtitle:"Check out your latest price alerts",actionShelf:(0,s.jsx)(function(){return(0,s.jsxs)(b.Z,{sx:{display:"flex"},children:[(0,s.jsx)(o.Z,{placement:"right",arrow:!0,title:"Search alerts by competitor, product name, EAN, or manufacturer code",children:(0,s.jsx)(c.Z,{variant:"outlined",placeholder:"Search alert",label:"Competitor, product name, EAN or manufacturer code",value:h,inputRef:Z,onChange:e=>j(e.target.value),sx:{my:2,width:"25rem"},autoComplete:"off"},"alert-search")}),h&&(0,s.jsx)(R.Z,{onClick:e=>{j("")},"aria-label":"Clear input",children:(0,s.jsx)(I.Z,{})})]})},{},"alert-action-shelf"),pageComponent:(0,s.jsx)(function(){return(0,s.jsxs)(l.ZP,{item:!0,className:x().lineChart,children:[r&&(0,s.jsx)(d.Z,{}),e&&(0,s.jsx)(u.Z,{severity:"error",children:"Error loading alerts"}),!r&&!e&&t&&(0,s.jsx)(A,{alerts:n})]})},{})},"alert-page")}},6574:function(e,t,r){"use strict";r.d(t,{Bc:function(){return i},fH:function(){return l},sM:function(){return s}});var n=r(6154),a=r(4484);async function s(){let e=await n.Z.get(a.ZP.ALERTS);return console.log("Get alerts response: ",e.data),e.data}async function i(){let e=await n.Z.get(a.ZP.ALERT_COUNT);return void 0===e.data||null===e.data?0:e.data}async function l(e){let t=await n.Z.patch(a.ZP.ALERTS,e);return t.data}},4958:function(e){e.exports={accountCircleIcon:"DashboardDrawer_accountCircleIcon__LJVAz",logoutIcon:"DashboardDrawer_logoutIcon__EuxIl",listItemLink:"DashboardDrawer_listItemLink__vrok9"}},5981:function(e){e.exports={dashboardTitle:"DashboardGenericContent_dashboardTitle__JYo_d",dashboardSubtitle:"DashboardGenericContent_dashboardSubtitle__d1_jV",actionShelf:"DashboardGenericContent_actionShelf__Z69vu",contentWrapper:"DashboardGenericContent_contentWrapper__XV2Uc",lineChart:"DashboardGenericContent_lineChart__4Dsfy",drawerWrapper:"DashboardGenericContent_drawerWrapper__Yp0vM",dashboardWrapper:"DashboardGenericContent_dashboardWrapper__aPPfz"}}},function(e){e.O(0,[885,135,810,243,260,774,888,179],function(){return e(e.s=2621)}),_N_E=e.O()}]);