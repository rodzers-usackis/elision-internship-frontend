(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{3343:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(4938)),a=r(5893),o=(0,i.default)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=o},594:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(4938)),a=r(5893),o=(0,i.default)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.Z=o},8953:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(4938)),a=r(5893),o=(0,i.default)((0,a.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"}),"CloudDownload");t.Z=o},4721:function(e,t,r){"use strict";var n=r(4836);t.Z=void 0;var i=n(r(4938)),a=r(5893),o=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.Z=o},6242:function(e,t,r){"use strict";r.d(t,{Z:function(){return j}});var n=r(7462),i=r(3366),a=r(7294),o=r(6010),s=r(4780),c=r(948),l=r(1657),d=r(629),u=r(1588),p=r(4867);function h(e){return(0,p.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var x=r(5893);let m=["className","raised"],f=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},h,t)},g=(0,c.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),Z=a.forwardRef(function(e,t){let r=(0,l.Z)({props:e,name:"MuiCard"}),{className:a,raised:s=!1}=r,c=(0,i.Z)(r,m),d=(0,n.Z)({},r,{raised:s}),u=f(d);return(0,x.jsx)(g,(0,n.Z)({className:(0,o.Z)(u.root,a),elevation:s?8:void 0,ref:t,ownerState:d},c))});var j=Z},3771:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/my-catalog",function(){return r(6727)}])},5375:function(e,t,r){"use strict";r.d(t,{I:function(){return i},O:function(){return g}});var n,i,a=r(5893),o=r(2133),s=r(281),c=r(6755),l=r(5150),d=r(7848),u=r(6574),p=r(4948);let h=()=>{let{alertCount:e}=function(){let{isLoading:e,isError:t,data:r}=(0,d.a)({queryKey:["alert-count"],queryFn:()=>(0,u.Bc)()});return{isAlertCountLoading:e,isAlertCountError:t,alertCount:r}}();return(0,a.jsx)(a.Fragment,{children:e>0?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.Z,{badgeContent:e,color:"error",children:(0,a.jsx)(l.Z,{})})}):(0,a.jsx)(l.Z,{})})};var x=r(8878),m=r(4229),f=r(8758);let g=[{title:"My Catalog",href:"/dashboard/my-catalog",className:"nav-links",icon:(0,a.jsx)(o.Z,{}),value:1},{title:" Competitors",href:"/dashboard/competitors",className:"nav-links",icon:(0,a.jsx)(s.Z,{}),value:2},{title:"Reports",href:"/dashboard/reports",className:"nav-links",icon:(0,a.jsx)(c.Z,{}),value:3},{title:" Alerts",href:"/dashboard/alerts",className:"nav-links",icon:(0,a.jsx)(h,{}),value:4},{title:" Alert Rules",href:"/dashboard/alert-rules",className:"nav-links",icon:(0,a.jsx)(f.Z,{}),value:5,subValue:1},{title:"Alert Settings",href:"/dashboard/alert-settings",className:"nav-links",icon:(0,a.jsx)(m.Z,{}),value:6,subValue:2},{title:"My Account",href:"/dashboard/my-account",className:"nav-links",icon:(0,a.jsx)(x.Z,{}),value:7}];(n=i||(i={}))[n.MyCatalog=1]="MyCatalog",n[n.Competitors=2]="Competitors",n[n.Reports=3]="Reports",n[n.Alerts=4]="Alerts",n[n.AlertRules=5]="AlertRules",n[n.AlertSettings=6]="AlertSettings",n[n.MyAccount=7]="MyAccount"},6381:function(e,t,r){"use strict";r.d(t,{Z:function(){return T}});var n=r(5893),i=r(7294),a=r(6886),o=r(3321),s=r(7720),c=r(7533),l=r(5861),d=r(155),u=r(8462),p=r(5375),h=r(7212),x=r(7594),m=r(9334),f=r(8619),g=r(1145),Z=r(8201),j=r(3540),v=r(5675),C=r.n(v),P=r(1664),b=r.n(P),y=r(4958),S=r.n(y),k=r(3542);function w(e){let{selectedPage:t}=e,r="260px",{logout:v,loggedInUser:P}=(0,i.useContext)(k.Z),y=e=>({selected:t===e});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(c.ZP,{variant:"permanent",anchor:"left",sx:{minWidth:r,width:r},children:(0,n.jsxs)(a.ZP,{container:!0,display:"flex",justifyContent:"space-between",flexDirection:"column",paddingX:2,sx:{height:"100%"},children:[(0,n.jsxs)(a.ZP,{item:!0,container:!0,display:"flex",flexDirection:"column",flex:1,children:[(0,n.jsx)(a.ZP,{item:!0,display:"flex",justifyContent:"center",paddingY:1,children:(0,n.jsx)(d.Z,{children:(0,n.jsx)(C(),{src:"/price_spy_logo.svg",alt:"Price Spy Logo",width:180,height:80,priority:!0})})}),(0,n.jsx)(s.Z,{}),(0,n.jsx)(a.ZP,{item:!0,paddingTop:1,children:(0,n.jsx)(u.Z,{children:p.O.map(e=>(0,n.jsx)(h.ZP,{children:(0,n.jsx)(b(),{href:e.href,className:S().listItemLink,children:(0,n.jsxs)(f.Z,{...y(e.value),children:[(0,n.jsx)(x.Z,{children:e.icon}),(0,n.jsx)(m.Z,{primary:e.title})]})})},e.value))})})]}),(0,n.jsxs)(a.ZP,{item:!0,children:[(0,n.jsx)(s.Z,{}),(0,n.jsxs)(a.ZP,{container:!0,display:"flex",justifyContent:"space-evenly",alignItems:"center",flexDirection:"row",paddingY:2,children:[(0,n.jsx)(a.ZP,{item:!0,children:(0,n.jsx)(g.Z,{sx:{fontSize:"32px"}})}),(0,n.jsx)(a.ZP,{item:!0,children:(0,n.jsx)(l.Z,{fontWeight:"bold",children:"Need help? Chat with us"})})]}),(0,n.jsx)(s.Z,{}),(0,n.jsxs)(a.ZP,{container:!0,display:"flex",justifyContent:"space-evenly",alignItems:"center",flexDirection:"row",paddingY:2,children:[(0,n.jsx)(a.ZP,{item:!0,children:(0,n.jsx)(o.Z,{children:(0,n.jsx)(Z.Z,{sx:{fontSize:"48px"}})})}),(0,n.jsxs)(a.ZP,{item:!0,children:[(0,n.jsx)(l.Z,{children:"Customer"}),(0,n.jsx)(l.Z,{fontWeight:"bold",children:null==P?void 0:P.firstName})]}),(0,n.jsx)(a.ZP,{item:!0,children:(0,n.jsx)(o.Z,{onClick:e=>{e.preventDefault(),v()},children:(0,n.jsx)(j.Z,{sx:{fontSize:"30px"}})})})]})]})]})})})}var _=r(5981),D=r.n(_);function T(e){let{pageComponent:t,currentPage:r,pageTitle:i,pageSubtitle:o,actionShelf:c}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(a.ZP,{container:!0,display:"flex",flexDirection:"row",height:"100vh",px:0,children:[(0,n.jsx)(a.ZP,{item:!0,style:{flex:0},children:(0,n.jsx)(w,{selectedPage:r})}),(0,n.jsxs)(a.ZP,{item:!0,className:D().dashboardWrapper,children:[(0,n.jsx)(l.Z,{className:D().dashboardTitle,children:i}),(0,n.jsx)(l.Z,{className:D().dashboardSubtitle,children:o}),c,(0,n.jsx)(s.Z,{}),t]})]})})}},6727:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ey}});var n=r(5893),i=r(7294),a=r(6886),o=r(135),s=r(8456),c=r(9368),l=r(5981),d=r.n(l),u=r(7357),p=r(7906),h=r(295),x=r(3252),m=r(2882),f=r(5347),g=r(3816),Z=r(629),j=r(4386),v=r(480),C=r(5843),P=r(155),b=r(1796),y=r(5861),S=r(3946),k=r(7957),w=r(1733),_=r(8309),D=r(8953),T=r(5945),M=r(8228),N=r(8990),z=r(1737),E=r(3321),A=r(7504),I=r(7536),R=r(1604),F=r(6312);let L=R.z.object({isTracked:R.z.boolean(),productPurchaseCost:R.z.number().positive("Must be positive.").or(R.z.string().regex(/^\d*\.?\d+$/,"Must be a positive number.").min(1).transform(e=>parseFloat(e))),productSellPrice:R.z.number().positive("Must be positive.").or(R.z.string().regex(/^\d*\.?\d+$/,"Must be a positive number.").min(1).transform(e=>parseFloat(e)))});function O(e){let{open:t,onClose:r,product:a}=e,[c,l]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),{updateTrackedProductMutation:p}=function(){let e=(0,T.NL)(),{isError:t,isLoading:r,data:n,mutateAsync:i}=(0,M.D)({mutationFn:N.kZ,onSuccess:t=>{e.setQueryData(["trackedProducts"],e=>e?e.map(e=>e.id===t.id?t:e):[])}});return{isUpdateTrackedProductError:t,isUpdateTrackedProductLoading:r,trackedProductUpdated:n,updateTrackedProductMutation:i}}(),{register:h,formState:x,handleSubmit:m,watch:f}=(0,I.cI)({resolver:(0,F.F)(L),defaultValues:{isTracked:a.isTracked,productPurchaseCost:a.productPurchaseCost,productSellPrice:a.productSellPrice,minPrice:a.minPrice}}),{errors:g,isLoading:j}=x;function P(){console.log(f()),l(!1);let{isTracked:e,productPurchaseCost:t,productSellPrice:r,minPrice:n}=f(),i={id:a.id,tracked:e,productPurchaseCost:t,productSellPrice:r,minPrice:n};p(i).then(e=>{u(!0)}).catch(e=>{l(!0)})}return(0,n.jsx)(A.Z,{sx:{overflow:"scroll",padding:"1rem",display:"flex",justifyContent:"center",alignItems:"center"},open:t,onClose:r,children:(0,n.jsx)(Z.Z,{sx:{width:"fit-content"},children:d?(0,n.jsx)(function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.Z,{variant:"filled",severity:"success",children:" Product updated successfully."}),(0,n.jsx)(E.Z,{onClick:r,children:"Ok"})]})},{}):(0,n.jsx)(function(){var e,t,r,i,l,d;return(0,n.jsxs)("form",{style:{backgroundColor:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"1rem",margin:"3rem",padding:"2rem"},onSubmit:m(P),children:[(0,n.jsx)(y.Z,{variant:"h5",children:a.productName}),(0,n.jsx)(o.Z,{error:!!g.productPurchaseCost,helperText:null===(e=g.productPurchaseCost)||void 0===e?void 0:null===(t=e.message)||void 0===t?void 0:t.toString(),...h("productPurchaseCost"),placeholder:"Purchase cost",label:"Purchase cost"}),(0,n.jsx)(o.Z,{error:!!g.productSellPrice,helperText:null===(r=g.productSellPrice)||void 0===r?void 0:null===(i=r.message)||void 0===i?void 0:i.toString(),...h("productSellPrice"),placeholder:"Sell price",label:"Sell price"}),(0,n.jsx)(o.Z,{error:!!g.minPrice,helperText:null===(l=g.minPrice)||void 0===l?void 0:null===(d=l.message)||void 0===d?void 0:d.toString(),...h("minPrice"),placeholder:"Minimum price",label:"Minimum price"}),(0,n.jsx)(v.Z,{control:(0,n.jsx)(C.Z,{checked:f("isTracked"),id:"isTracked",...h("isTracked")}),label:"Track this product",labelPlacement:"start"}),(0,n.jsx)(E.Z,{type:"submit",variant:"contained",sx:{maxWidth:"50%"},children:"Save"}),j?(0,n.jsx)(s.Z,{}):"",c?(0,n.jsx)(z.Z,{variant:"filled",severity:"error",children:" Error updating the product."}):""]})},{})})})}var W=r(3457);let G=R.z.object({ean:R.z.string(),manufacturerCode:R.z.string(),productPurchaseCost:R.z.number().positive("Purchase cost has to be positive.").or(R.z.string().regex(/^\d*\.?\d+$/).min(1,"Purchase cost must be greater than 0.").transform(e=>parseFloat(e))),productSellPrice:R.z.number().positive("Sell price has to be positive.").or(R.z.string().regex(/^\d*\.?\d+$/).min(1,"Sell price must be greater than 0.").transform(e=>parseFloat(e))),minPrice:R.z.number().positive("Min price has to be positive.").or(R.z.string().regex(/^\d*\.?\d+$/).min(1,"Min price must be greater than 0.").transform(e=>parseFloat(e)))});function V(e){let{open:t,onClose:r}=e,[a,c]=(0,i.useState)(!1),[l,d]=(0,i.useState)(!1),{addTrackedProductsMutation:u}=function(){let e=(0,T.NL)(),{isLoading:t,isError:r,data:n,mutateAsync:i}=(0,M.D)({mutationFn:N.Gx,onSuccess:t=>{e.setQueryData(["trackedProducts"],e=>[...null!=e?e:[],t])}});return{isAddTrackedProductsError:r,isAddTrackedProductsLoading:t,trackedProductsAdded:n,addTrackedProductsMutation:i}}(),{register:p,formState:h,handleSubmit:x,watch:m}=(0,I.cI)({resolver:(0,F.F)(G)}),{errors:f,isLoading:g}=h;function Z(){c(!1);let{ean:e,manufacturerCode:t,productPurchaseCost:r,productSellPrice:n,minPrice:i}=m();u({ean:e,manufacturerCode:t,productPurchaseCost:r,productSellPrice:n,minPrice:i}).then(e=>{d(!0)}).catch(e=>{c(!0)})}return(0,n.jsx)(A.Z,{sx:{overflow:"scroll"},open:t,onClose:r,children:l?(0,n.jsx)(function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.Z,{variant:"filled",severity:"success",children:"Product added successfully."}),(0,n.jsx)(E.Z,{onClick:r,children:"Ok"})]})},{}):(0,n.jsx)(function(){var e,t,r,i,c,l,d,u,h,m;return(0,n.jsxs)("form",{style:{backgroundColor:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"1rem",margin:"3rem",padding:"2rem"},onSubmit:x(Z),children:[(0,n.jsx)(y.Z,{variant:"h5",children:"Add a product to track"}),(0,n.jsxs)(W.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"1rem"},children:[(0,n.jsx)(o.Z,{type:"number",error:!!f.productPurchaseCost,helperText:null===(e=f.productPurchaseCost)||void 0===e?void 0:null===(t=e.message)||void 0===t?void 0:t.toString(),...p("productPurchaseCost"),placeholder:"Purchase cost",label:"Purchase cost"}),(0,n.jsx)(o.Z,{type:"number",error:!!f.productSellPrice,helperText:null===(r=f.productSellPrice)||void 0===r?void 0:null===(i=r.message)||void 0===i?void 0:i.toString(),...p("productSellPrice"),placeholder:"Sell price",label:"Sell price"}),(0,n.jsx)(o.Z,{type:"number",error:!!f.minPrice,helperText:null===(c=f.minPrice)||void 0===c?void 0:null===(l=c.message)||void 0===l?void 0:l.toString(),...p("minPrice"),placeholder:"Minimum price",label:"Minimum price"}),(0,n.jsx)(o.Z,{sx:{marginTop:"0.5rem"},type:"text",error:!!f.ean,helperText:null===(d=f.ean)||void 0===d?void 0:null===(u=d.message)||void 0===u?void 0:u.toString(),...p("ean"),placeholder:"EAN",label:"EAN"}),(0,n.jsx)(y.Z,{variant:"caption",children:"OR"}),(0,n.jsx)(o.Z,{sx:{marginTop:"0.5rem"},type:"text",error:!!f.manufacturerCode,helperText:null===(h=f.manufacturerCode)||void 0===h?void 0:null===(m=h.message)||void 0===m?void 0:m.toString(),...p("manufacturerCode"),placeholder:"Manufacturer code",label:"Manufacturer code"})]}),(0,n.jsx)(E.Z,{type:"submit",variant:"contained",sx:{maxWidth:"50%"},children:"Save"}),g?(0,n.jsx)(s.Z,{}):"",a?(0,n.jsx)(z.Z,{variant:"filled",severity:"error",children:" Error adding the product."}):""]})},{})})}var K=r(6154),q=r(4484);async function B(e){try{let t=await K.Z.post(q.ZP.SCRAPING_TASKS,e);return t.data}catch(e){throw e}}var U=r(8703);function Y(e){let{open:t,onClose:r,isLoading:i,isError:a}=e;return(0,n.jsx)(U.Z,{anchorOrigin:{vertical:"top",horizontal:"right"},open:t,autoHideDuration:6e3,onClose:r,sx:{boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.2)",borderRadius:"4px"},children:(0,n.jsx)(z.Z,{severity:a?"error":i?"info":"success",sx:{width:"100%"},children:i?"Scraping...":a?"Scraping failed":"Scraped successfully. Prices will be updated in a few minutes."})})}function $(e){let{deleteTrackedProductsMutation:t,isDeleteTrackedProductsError:r,isDeleteTrackedProductsLoading:a}=function(){let e=(0,T.NL)(),{isError:t,isLoading:r,data:n,mutateAsync:i}=(0,M.D)({mutationFn:N.Fd,onSuccess:(t,r)=>{e.setQueryData(["trackedProducts"],e=>(null!=e?e:[]).filter(e=>!r.includes(e.id)))}});return{isDeleteTrackedProductsError:t,isDeleteTrackedProductsLoading:r,trackedProductsDeleted:n,deleteTrackedProductsMutation:i}}(),{isPostScrapingTaskError:o,isPostScrapingTaskLoading:s,postScrapingTaskMutation:c}=function(){let{isLoading:e,isError:t,data:r,mutateAsync:n}=(0,M.D)({mutationFn:B});return{isPostScrapingTaskLoading:e,isPostScrapingTaskError:t,postScrapingTaskData:r,postScrapingTaskMutation:n}}(),{numSelected:l,selected:d}=e,[u,p]=(0,i.useState)(!1),[h,x]=(0,i.useState)(!1),[m,f]=(0,i.useState)(!1);function g(){t(d.map(e=>e.id))}function Z(){f(!0);let e=d.map(e=>e.productId);c({productIds:e})}return(0,n.jsxs)(P.Z,{sx:{pl:{sm:2},pr:{xs:1,sm:1},...l>0&&{bgcolor:e=>(0,b.Fq)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[(0,n.jsx)(Y,{open:m,onClose:()=>{f(!1)},isError:o,isLoading:s}),l>0?(0,n.jsxs)(y.Z,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[l," selected"]}):(0,n.jsx)(y.Z,{sx:{flex:"1 1 100%"},variant:"h6",id:"tableTitle",component:"div",children:e.title}),1===l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{title:"Scrape Product's Price",children:(0,n.jsx)(S.Z,{onClick:Z,size:"large",children:(0,n.jsx)(D.Z,{})})}),(0,n.jsx)(j.Z,{title:"Edit Product",children:(0,n.jsx)(S.Z,{size:"large",onClick:function(){p(!0)},children:(0,n.jsx)(k.Z,{})})}),(0,n.jsx)(j.Z,{title:"Delete Product",children:(0,n.jsx)(S.Z,{onClick:g,size:"large",children:(0,n.jsx)(w.Z,{})})})]}):l>1?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{title:"Scrape Selected Products' Prices",children:(0,n.jsx)(S.Z,{onClick:Z,size:"large",children:(0,n.jsx)(D.Z,{})})}),(0,n.jsx)(j.Z,{title:"Delete Selected Products",children:(0,n.jsx)(S.Z,{onClick:g,size:"large",children:(0,n.jsx)(w.Z,{})})})]}):(0,n.jsx)(j.Z,{title:"Add Product",children:(0,n.jsx)(S.Z,{size:"large",onClick:function(){x(!0)},children:(0,n.jsx)(_.Z,{})})}),1===d.length&&u?(0,n.jsx)(O,{product:d[0],open:u,onClose:function(){p(!1)}}):"",h?(0,n.jsx)(V,{open:h,onClose:function(){x(!1)}}):""]})}var X=r(3184),H=r(6280),Q=r(3113);let J=[{id:"productName",numeric:!1,disablePadding:!0,label:"Product Name"},{id:"productCategory",numeric:!1,disablePadding:!1,label:"Category"},{id:"productPurchaseCost",numeric:!0,disablePadding:!1,label:"Cost"},{id:"productSellPrice",numeric:!0,disablePadding:!1,label:"Price"},{id:"minPrice",numeric:!0,disablePadding:!1,label:"Minimum Price"},{id:"productEan",numeric:!1,disablePadding:!1,label:"EAN"},{id:"productManufacturerCode",numeric:!0,disablePadding:!1,label:"Manufacturer Code"},{id:"isTracked",numeric:!1,disablePadding:!1,label:"Status"}];function ee(e){let{onSelectAllClick:t,order:r,orderBy:i,numSelected:a,rowCount:o,onRequestSort:s}=e,l=e=>t=>{s(t,e)};return(0,n.jsx)(X.Z,{children:(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(x.Z,{padding:"checkbox",children:(0,n.jsx)(c.Z,{color:"primary",indeterminate:a>0&&a<o,checked:o>0&&a===o,onChange:t,inputProps:{"aria-label":"select all desserts"}})}),J.map(e=>(0,n.jsx)(x.Z,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:i===e.id&&r,children:(0,n.jsxs)(H.Z,{active:i===e.id,direction:i===e.id?r:"asc",onClick:l(e.id),children:[e.label,i===e.id?(0,n.jsx)(u.Z,{component:"span",sx:Q.Z,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id))]})})}var et=r(7848),er=r(1664),en=r.n(er),ei=r(6381),ea=r(5375),eo=r(3343),es=r(4721),ec=r(6242),el=r(7462),ed=r(3366),eu=r(6010),ep=r(4780),eh=r(948),ex=r(1657),em=r(1588),ef=r(4867);function eg(e){return(0,ef.Z)("MuiCardContent",e)}(0,em.Z)("MuiCardContent",["root"]);let eZ=["className","component"],ej=e=>{let{classes:t}=e;return(0,ep.Z)({root:["root"]},eg,t)},ev=(0,eh.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),eC=i.forwardRef(function(e,t){let r=(0,ex.Z)({props:e,name:"MuiCardContent"}),{className:i,component:a="div"}=r,o=(0,ed.Z)(r,eZ),s=(0,el.Z)({},r,{component:a}),c=ej(s);return(0,n.jsx)(ev,(0,el.Z)({as:a,className:(0,eu.Z)(c.root,i),ownerState:s,ref:t},o))});var eP=r(594);function eb(e){let{product:t,open:r,onClose:i}=e;return t?(0,n.jsx)(A.Z,{sx:{overflow:"auto",padding:"1rem",display:"flex",justifyContent:"center",alignItems:"center"},open:r,onClose:i,children:(0,n.jsxs)(ec.Z,{sx:{width:"fit-content",padding:"1rem",position:"relative",maxHeight:"90vh",overflowY:"auto"},children:[(0,n.jsx)(eC,{sx:{position:"relative",zIndex:1},children:(0,n.jsx)(y.Z,{gutterBottom:!0,variant:"h5",component:"div",children:t.productName})}),(0,n.jsx)(S.Z,{"aria-label":"Close",sx:{position:"absolute",top:"-0.5rem",right:"-0.5rem",zIndex:2,padding:"1.5rem"},onClick:i,children:(0,n.jsx)(eP.Z,{})}),(0,n.jsxs)(eC,{sx:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,n.jsxs)(y.Z,{variant:"body2",color:"text.secondary",children:[t.productEan," | ",t.productManufacturerCode]}),(0,n.jsx)(y.Z,{variant:"body2",color:"text.secondary",children:t.description}),(0,n.jsx)(y.Z,{variant:"body2",color:"text.secondary",children:t.productCategory})]})]})}):(i(),(0,n.jsx)(n.Fragment,{}))}function ey(){let[e,t]=(0,i.useState)("asc"),[r,l]=(0,i.useState)("productName"),[P,b]=(0,i.useState)([]),[y,k]=(0,i.useState)(0),[w,_]=(0,i.useState)(!0),[D,T]=(0,i.useState)(10),[M,A]=(0,i.useState)([]),[I,R]=(0,i.useState)(""),F=(0,i.useRef)(null),[L,O]=(0,i.useState)(!1),[W,G]=(0,i.useState)(),{trackedProducts:V,isTrackedProductsError:K,isTrackedProductsLoading:q}=function(){let{isLoading:e,isError:t,data:r}=(0,et.a)({queryKey:["trackedProducts"],queryFn:N.ye});return{isTrackedProductsLoading:e,isTrackedProductsError:t,trackedProducts:r}}(),B=(null!=V?V:[]).map(e=>({id:e.id,productId:e.product.id,productName:e.product.name,productCategory:e.product.category,productPurchaseCost:e.productPurchaseCost,productSellPrice:e.productSellPrice,minPrice:e.minPrice,productEan:e.product.ean,productManufacturerCode:e.product.manufacturerCode,description:e.product.description,isTracked:e.tracked}));(0,i.useEffect)(()=>{b([])},[M]),(0,i.useEffect)(()=>{!function(){if(!B)return;if(""===I||!I){A(B);return}let e=B.filter(e=>{let t=e.productName.toLowerCase(),r=e.productEan.toLowerCase(),n=e.productManufacturerCode.toLowerCase(),i=e.productCategory.toLowerCase(),a=I.toLowerCase();return t.includes(a)||r.includes(a)||n.includes(a)||i.includes(a)});A(e)}()},[V,I,B]);let U=(n,i)=>{t(r===i&&"asc"===e?"desc":"asc"),l(i)},Y=e=>{if(e.target.checked){b(B),b(M||[]);return}b([])},X=(e,t)=>{let r=P.some(e=>e.id===t.id),n=r?P.filter(e=>e.id!==t.id):[...P,t];b(n)},H=(e,t)=>{k(t)},Q=e=>{T(parseInt(e.target.value,10)),k(0)},J=e=>{_(e.target.checked)},er=e=>P.some(t=>t.id===e.id),ec=y>0?Math.max(0,(1+y)*D-M.length):0,el=(0,i.useMemo)(()=>{var t;return(function(e,t){let r=e.map((e,t)=>[e,t]);return r.sort((e,r)=>{let n=t(e[0],r[0]);return 0!==n?n:e[1]-r[1]}),r.map(e=>e[0])})(M||[],(n,i)=>{if(t&&n[t]===i[t])return 0;if("isTracked"===r){let t=n[r]?1:0,a=i[r]?1:0;return(t-a)*("asc"===e?1:-1)}return"string"==typeof n[r]&&"string"==typeof i[r]?n[r].localeCompare(i[r])*("asc"===e?1:-1):(n[r]-i[r])*("asc"===e?1:-1)}).slice(y*D,y*D+D)},[e,r,y,D,M]);return(0,i.useEffect)(()=>{F.current&&document.activeElement!==F.current&&F.current.focus()},[I,F]),(0,n.jsx)(ei.Z,{currentPage:ea.I.MyCatalog,pageTitle:"My catalog",pageSubtitle:"Import and manage your products (".concat(null==V?void 0:V.length," active)."),actionShelf:(0,n.jsx)(function(){return(0,n.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,n.jsx)(o.Z,{id:"search-field-input",sx:{my:2,width:"25rem"},placeholder:"Search Product",label:"Product name, ean or manufacturer code",variant:"outlined",inputRef:F,value:I,onChange:e=>{R(e.target.value)},autoComplete:"off"},"search-field-input"),I&&(0,n.jsx)(S.Z,{onClick:e=>{R("")},"aria-label":"Clear input",children:(0,n.jsx)(eo.Z,{})})]},"product-search-box")},{},"catalog-action-shelf"),pageComponent:(0,n.jsx)(function(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.ZP,{item:!0,className:d().contentWrapper,children:q?(0,n.jsx)(s.Z,{}):K?(0,n.jsx)(z.Z,{severity:"error",children:"Error loading alerts"}):!q&&!K&&B&&(0,n.jsxs)(a.ZP,{item:!0,className:d().lineChart,children:[(0,n.jsx)(eb,{open:L,onClose:()=>O(!1),product:W}),(0,n.jsxs)(u.Z,{sx:{width:"100%",pt:2},children:[(0,n.jsxs)(Z.Z,{sx:{width:"100%",mb:2},children:[(0,n.jsx)($,{title:"Products",selected:P,numSelected:P.length,setSelected:b}),(0,n.jsx)(m.Z,{children:(0,n.jsxs)(p.Z,{"aria-labelledby":"tableTitle",size:w?"small":"medium",children:[(0,n.jsx)(ee,{numSelected:P.length,order:e,orderBy:r,onSelectAllClick:Y,onRequestSort:U,rowCount:M.length}),(0,n.jsxs)(h.Z,{children:[el.map((e,t)=>{let r=er(e),i="enhanced-table-checkbox-".concat(t);return(0,n.jsxs)(g.Z,{hover:!0,onClick:t=>X(t,e),role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,sx:{cursor:"pointer"},children:[(0,n.jsx)(x.Z,{padding:"checkbox",children:(0,n.jsx)(c.Z,{color:"primary",checked:r,inputProps:{"aria-labelledby":i}})}),(0,n.jsx)(x.Z,{component:"th",id:i,scope:"row",padding:"none",children:(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)(j.Z,{title:"Click to go to this product's report",placement:"left",arrow:!0,children:(0,n.jsx)(E.Z,{className:d().productLinkButton,sx:{my:"0.4rem",display:"inline-block"},component:en(),href:"/dashboard/reports?product_id=".concat(e.productId),onClick:e=>{e.stopPropagation()},children:e.productName})}),(0,n.jsx)(j.Z,{title:"Display product's details",placement:"right",arrow:!0,children:(0,n.jsx)(S.Z,{sx:{display:"inline-block"},"aria-label":"display product's details",onClick:t=>{t.stopPropagation(),G(e),O(!0)},children:(0,n.jsx)(es.Z,{})})})]})}),(0,n.jsx)(x.Z,{align:"right",children:e.productCategory}),(0,n.jsx)(x.Z,{align:"right",children:e.productPurchaseCost}),(0,n.jsx)(x.Z,{align:"right",children:e.productSellPrice}),(0,n.jsx)(x.Z,{align:"right",children:e.minPrice||"no minimum price set"}),(0,n.jsx)(x.Z,{align:"right",children:e.productEan}),(0,n.jsx)(x.Z,{align:"right",children:e.productManufacturerCode}),(0,n.jsx)(x.Z,{align:"right",style:{color:e.isTracked?"green":"red"},children:e.isTracked?"Tracked":"Not tracked"})]},e.id)}),ec>0&&(0,n.jsx)(g.Z,{style:{height:(w?33:53)*ec},children:(0,n.jsx)(x.Z,{colSpan:6})})]})]})}),(0,n.jsx)(f.Z,{rowsPerPageOptions:[10,25,50],component:"div",count:M.length,rowsPerPage:D,page:y,onPageChange:H,onRowsPerPageChange:Q})]}),(0,n.jsx)(v.Z,{control:(0,n.jsx)(C.Z,{checked:w,onChange:J}),label:"Dense padding"})]})]})})})},{})},"catalog-page")}},6574:function(e,t,r){"use strict";r.d(t,{Bc:function(){return o},fH:function(){return s},sM:function(){return a}});var n=r(6154),i=r(4484);async function a(){let e=await n.Z.get(i.ZP.ALERTS);return console.log("Get alerts response: ",e.data),e.data}async function o(){let e=await n.Z.get(i.ZP.ALERT_COUNT);return void 0===e.data||null===e.data?0:e.data}async function s(e){let t=await n.Z.patch(i.ZP.ALERTS,e);return t.data}},8990:function(e,t,r){"use strict";r.d(t,{Fd:function(){return s},Gx:function(){return o},kZ:function(){return c},ye:function(){return a}}),r(8455);var n=r(6154),i=r(4484);async function a(){let e=await n.Z.get(i.ZP.TRACKED_PRODUCTS);return e.data}async function o(e){let t=await n.Z.post(i.ZP.TRACKED_PRODUCTS,e);return t.data}async function s(e){return(await n.Z.delete(i.ZP.TRACKED_PRODUCTS,{data:e})).data}async function c(e){let t=await n.Z.patch(i.ZP.TRACKED_PRODUCTS,e);return t.data}},4958:function(e){e.exports={accountCircleIcon:"DashboardDrawer_accountCircleIcon__LJVAz",logoutIcon:"DashboardDrawer_logoutIcon__EuxIl",listItemLink:"DashboardDrawer_listItemLink__vrok9"}},5981:function(e){e.exports={dashboardTitle:"DashboardGenericContent_dashboardTitle__JYo_d",dashboardSubtitle:"DashboardGenericContent_dashboardSubtitle__d1_jV",actionShelf:"DashboardGenericContent_actionShelf__Z69vu",contentWrapper:"DashboardGenericContent_contentWrapper__XV2Uc",lineChart:"DashboardGenericContent_lineChart__4Dsfy",drawerWrapper:"DashboardGenericContent_drawerWrapper__Yp0vM",dashboardWrapper:"DashboardGenericContent_dashboardWrapper__aPPfz"}}},function(e){e.O(0,[135,810,243,760,260,703,370,774,888,179],function(){return e(e.s=3771)}),_N_E=e.O()}]);