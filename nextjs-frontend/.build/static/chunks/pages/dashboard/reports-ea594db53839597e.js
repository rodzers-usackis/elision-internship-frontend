(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[424],{5311:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/reports",function(){return r(9445)}])},5375:function(e,t,r){"use strict";r.d(t,{I:function(){return a},O:function(){return b}});var n,a,o=r(5893),i=r(2133),l=r(281),s=r(6755),c=r(5150),d=r(7848),u=r(6574),h=r(4948);let p=()=>{let{alertCount:e}=function(){let{isLoading:e,isError:t,data:r}=(0,d.a)({queryKey:["alert-count"],queryFn:()=>(0,u.Bc)()});return{isAlertCountLoading:e,isAlertCountError:t,alertCount:r}}();return(0,o.jsx)(o.Fragment,{children:e>0?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(h.Z,{badgeContent:e,color:"error",children:(0,o.jsx)(c.Z,{})})}):(0,o.jsx)(c.Z,{})})};var x=r(8878),f=r(4229),m=r(8758);let b=[{title:"My Catalog",href:"/dashboard/my-catalog",className:"nav-links",icon:(0,o.jsx)(i.Z,{}),value:1},{title:" Competitors",href:"/dashboard/competitors",className:"nav-links",icon:(0,o.jsx)(l.Z,{}),value:2},{title:"Reports",href:"/dashboard/reports",className:"nav-links",icon:(0,o.jsx)(s.Z,{}),value:3},{title:" Alerts",href:"/dashboard/alerts",className:"nav-links",icon:(0,o.jsx)(p,{}),value:4},{title:" Alert Rules",href:"/dashboard/alert-rules",className:"nav-links",icon:(0,o.jsx)(m.Z,{}),value:5,subValue:1},{title:"Alert Settings",href:"/dashboard/alert-settings",className:"nav-links",icon:(0,o.jsx)(f.Z,{}),value:6,subValue:2},{title:"My Account",href:"/dashboard/my-account",className:"nav-links",icon:(0,o.jsx)(x.Z,{}),value:7}];(n=a||(a={}))[n.MyCatalog=1]="MyCatalog",n[n.Competitors=2]="Competitors",n[n.Reports=3]="Reports",n[n.Alerts=4]="Alerts",n[n.AlertRules=5]="AlertRules",n[n.AlertSettings=6]="AlertSettings",n[n.MyAccount=7]="MyAccount"},6381:function(e,t,r){"use strict";r.d(t,{Z:function(){return A}});var n=r(5893),a=r(7294),o=r(6886),i=r(3321),l=r(7720),s=r(7533),c=r(5861),d=r(155),u=r(8462),h=r(5375),p=r(7212),x=r(7594),f=r(9334),m=r(8619),b=r(1145),g=r(8201),j=r(3540),Z=r(5675),C=r.n(Z),y=r(1664),v=r.n(y),_=r(4958),P=r.n(_),D=r(3542);function w(e){let{selectedPage:t}=e,r="260px",{logout:Z,loggedInUser:y}=(0,a.useContext)(D.Z),_=e=>({selected:t===e});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.ZP,{variant:"permanent",anchor:"left",sx:{minWidth:r,width:r},children:(0,n.jsxs)(o.ZP,{container:!0,display:"flex",justifyContent:"space-between",flexDirection:"column",paddingX:2,sx:{height:"100%"},children:[(0,n.jsxs)(o.ZP,{item:!0,container:!0,display:"flex",flexDirection:"column",flex:1,children:[(0,n.jsx)(o.ZP,{item:!0,display:"flex",justifyContent:"center",paddingY:1,children:(0,n.jsx)(d.Z,{children:(0,n.jsx)(C(),{src:"/price_spy_logo.svg",alt:"Price Spy Logo",width:180,height:80,priority:!0})})}),(0,n.jsx)(l.Z,{}),(0,n.jsx)(o.ZP,{item:!0,paddingTop:1,children:(0,n.jsx)(u.Z,{children:h.O.map(e=>(0,n.jsx)(p.ZP,{children:(0,n.jsx)(v(),{href:e.href,className:P().listItemLink,children:(0,n.jsxs)(m.Z,{..._(e.value),children:[(0,n.jsx)(x.Z,{children:e.icon}),(0,n.jsx)(f.Z,{primary:e.title})]})})},e.value))})})]}),(0,n.jsxs)(o.ZP,{item:!0,children:[(0,n.jsx)(l.Z,{}),(0,n.jsxs)(o.ZP,{container:!0,display:"flex",justifyContent:"space-evenly",alignItems:"center",flexDirection:"row",paddingY:2,children:[(0,n.jsx)(o.ZP,{item:!0,children:(0,n.jsx)(b.Z,{sx:{fontSize:"32px"}})}),(0,n.jsx)(o.ZP,{item:!0,children:(0,n.jsx)(c.Z,{fontWeight:"bold",children:"Need help? Chat with us"})})]}),(0,n.jsx)(l.Z,{}),(0,n.jsxs)(o.ZP,{container:!0,display:"flex",justifyContent:"space-evenly",alignItems:"center",flexDirection:"row",paddingY:2,children:[(0,n.jsx)(o.ZP,{item:!0,children:(0,n.jsx)(i.Z,{children:(0,n.jsx)(g.Z,{sx:{fontSize:"48px"}})})}),(0,n.jsxs)(o.ZP,{item:!0,children:[(0,n.jsx)(c.Z,{children:"Customer"}),(0,n.jsx)(c.Z,{fontWeight:"bold",children:null==y?void 0:y.firstName})]}),(0,n.jsx)(o.ZP,{item:!0,children:(0,n.jsx)(i.Z,{onClick:e=>{e.preventDefault(),Z()},children:(0,n.jsx)(j.Z,{sx:{fontSize:"30px"}})})})]})]})]})})})}var k=r(5981),S=r.n(k);function A(e){let{pageComponent:t,currentPage:r,pageTitle:a,pageSubtitle:i,actionShelf:s}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o.ZP,{container:!0,display:"flex",flexDirection:"row",height:"100vh",px:0,children:[(0,n.jsx)(o.ZP,{item:!0,style:{flex:0},children:(0,n.jsx)(w,{selectedPage:r})}),(0,n.jsxs)(o.ZP,{item:!0,className:S().dashboardWrapper,children:[(0,n.jsx)(c.Z,{className:S().dashboardTitle,children:a}),(0,n.jsx)(c.Z,{className:S().dashboardSubtitle,children:i}),s,(0,n.jsx)(l.Z,{}),t]})]})})}},2096:function(e,t,r){"use strict";r.d(t,{r:function(){return o}});var n=r(8990),a=r(7848);function o(){let{isLoading:e,isError:t,data:r}=(0,a.a)({queryKey:["products"],queryFn:()=>(0,n.ye)()});return{isLoadingGetProducts:e,isErrorGetProducts:t,products:r}}},9445:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var n=r(5893),a=r(6886),o=r(8972),i=r(135),l=r(1737),s=r(8456),c=r(5981),d=r.n(c),u=r(2096),h=r(7848);r(8455);var p=r(6154),x=r(4484);async function f(e,t,r){let n=t?t.format("YYYY-MM-DD"):null,a=r?r.format("YYYY-MM-DD"):null,o=await p.Z.get(x.ZP.PRODUCT_PRICE_HISTORY+"/"+e,{params:{before:n,after:a}});return o.data}var m=r(3148),b=r(6495),g=r(7484),j=r.n(g);m.kL.register(m.uw,m.f$,m.od,m.jn,m.Dx,m.u,m.De);let Z={responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Pricing History",font:{size:16},legend:{position:"top",display:!1},layout:{padding:{right:0}}}}},C=[{backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgb(255, 99, 132)"},{backgroundColor:"rgba(255, 159, 64, 0.2)",borderColor:"rgb(255, 159, 64)"},{backgroundColor:"rgba(255, 205, 86, 0.2)",borderColor:"rgb(255, 205, 86)"},{backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgb(75, 192, 192)"},{backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgb(54, 162, 235)"},{backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgb(153, 102, 255)"},{backgroundColor:"rgba(201, 203, 207, 0.2)",borderColor:"rgb(201, 203, 207)"},{backgroundColor:"rgba(97,239,64,0.2)",borderColor:"rgb(109,255,99)"}];function y(e){let{data:t}=e,r=null==t?void 0:t.data[0].timestampAmounts.map(e=>e.timestamp);null==t||t.data[0].timestampAmounts.map(e=>e.amount),null==r||r.map(e=>j()(e).format("YYYY-MM-DD")),null==t||t.product.name;let a={labels:null==r?void 0:r.map(e=>j()(e).format("YYYY-MM-DD")),datasets:(null==t?void 0:t.data.map((e,t)=>({label:e.retailerCompanyDto.name,data:e.timestampAmounts.map(e=>e.amount),borderColor:C[t].borderColor,tension:.1,backgroundColor:C[t].backgroundColor})))||[]};return console.log(t),(0,n.jsx)(b.x1,{options:Z,data:a})}var v=r(720),_=r(586),P=r(4539),D=r(3755),w=r(7294),k=r(1163),S=r(6381),A=r(5375);function N(){var e,t;let{isLoadingGetProducts:r,isErrorGetProducts:c,products:p}=(0,u.r)(),x=(0,k.useRouter)(),[m,b]=(0,w.useState)((null===(e=x.query)||void 0===e?void 0:e.product_id)||""),g=j()("2023-12-12"),Z=j()("2023-01-01"),[C,N]=(0,w.useState)([Z,g]),{isProductPriceHistoryLoading:R,isProductPriceHistoryError:Y,productPriceHistory:T}=function(e,t,r){let{isLoading:n,isError:a,data:o}=(0,h.a)({queryKey:["productPriceHistory",e,t,r],queryFn:()=>f(e,t,r)});return{isProductPriceHistoryLoading:n,isProductPriceHistoryError:a,productPriceHistory:o}}(m,C[1],C[0]),E=e=>{N(e)},M=e=>{b(e.target.value)};(0,w.useEffect)(()=>{var e;if(!(null===(e=x.query)||void 0===e?void 0:e.product_id)&&C[1]&&C[0]&&p&&p.length>0){let e=p[0].product.id;b(e)}},[p,null===(t=x.query)||void 0===t?void 0:t.product_id,C]);let I=[{value:1,label:"Pricing History"}];return(0,n.jsx)(S.Z,{currentPage:A.I.Reports,pageTitle:"Reports",pageSubtitle:"Find out about the pricing trends of your competitors",actionShelf:(0,n.jsx)(function(){return(0,n.jsxs)(a.ZP,{container:!0,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsx)(a.ZP,{item:!0,xs:3,className:d().actionShelf,children:(0,n.jsx)(i.Z,{select:!0,id:"outlined-select-report-type",label:"Select report type",defaultValue:I[0].value,fullWidth:!0,children:I.map(e=>(0,n.jsx)(o.Z,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(a.ZP,{item:!0,xs:3,className:d().actionShelf,children:(0,n.jsx)(i.Z,{select:!0,id:"outlined-select-product",label:"Select product",defaultValue:null==p?void 0:p[0].product.id,value:m,onChange:M,fullWidth:!0,children:null==p?void 0:p.map(e=>(0,n.jsx)(o.Z,{value:e.product.id,children:e.product.name},e.product.name))})}),(0,n.jsx)(a.ZP,{item:!0,xs:3,className:d().actionShelf,children:(0,n.jsx)(v._,{dateAdapter:_.y,children:(0,n.jsx)(P.D,{slots:{field:D.n},sx:{width:"100%"},defaultValue:C,onChange:E})})})]})},{}),pageComponent:(0,n.jsx)(function(){return(0,n.jsx)(a.ZP,{item:!0,className:d().contentWrapper,children:r||R?(0,n.jsx)(s.Z,{}):c||Y?(0,n.jsx)(l.Z,{severity:"error",children:"Price historian for this product could not be loaded"}):(0,n.jsx)(a.ZP,{item:!0,className:d().lineChart,children:(0,n.jsx)(y,{data:T})})})},{})})}},6574:function(e,t,r){"use strict";r.d(t,{Bc:function(){return i},fH:function(){return l},sM:function(){return o}});var n=r(6154),a=r(4484);async function o(){let e=await n.Z.get(a.ZP.ALERTS);return console.log("Get alerts response: ",e.data),e.data}async function i(){let e=await n.Z.get(a.ZP.ALERT_COUNT);return void 0===e.data||null===e.data?0:e.data}async function l(e){let t=await n.Z.patch(a.ZP.ALERTS,e);return t.data}},8990:function(e,t,r){"use strict";r.d(t,{Fd:function(){return l},Gx:function(){return i},kZ:function(){return s},ye:function(){return o}}),r(8455);var n=r(6154),a=r(4484);async function o(){let e=await n.Z.get(a.ZP.TRACKED_PRODUCTS);return e.data}async function i(e){let t=await n.Z.post(a.ZP.TRACKED_PRODUCTS,e);return t.data}async function l(e){return(await n.Z.delete(a.ZP.TRACKED_PRODUCTS,{data:e})).data}async function s(e){let t=await n.Z.patch(a.ZP.TRACKED_PRODUCTS,e);return t.data}},4958:function(e){e.exports={accountCircleIcon:"DashboardDrawer_accountCircleIcon__LJVAz",logoutIcon:"DashboardDrawer_logoutIcon__EuxIl",listItemLink:"DashboardDrawer_listItemLink__vrok9"}},5981:function(e){e.exports={dashboardTitle:"DashboardGenericContent_dashboardTitle__JYo_d",dashboardSubtitle:"DashboardGenericContent_dashboardSubtitle__d1_jV",actionShelf:"DashboardGenericContent_actionShelf__Z69vu",contentWrapper:"DashboardGenericContent_contentWrapper__XV2Uc",lineChart:"DashboardGenericContent_lineChart__4Dsfy",drawerWrapper:"DashboardGenericContent_drawerWrapper__Yp0vM",dashboardWrapper:"DashboardGenericContent_dashboardWrapper__aPPfz"}}},function(e){e.O(0,[196,135,810,736,774,888,179],function(){return e(e.s=5311)}),_N_E=e.O()}]);